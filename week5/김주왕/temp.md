# Chapter 14. 가상 메모리

## 14-1. 연속 메모리 할당

### 연속 메모리 할당
- 프로세스에 **연속적인 물리 메모리 공간**을 할당하는 방식
- 구현은 단순하지만 메모리 활용 효율이 낮음

### 스와핑 (Swapping)
- 실행되지 않는 프로세스를 **보조기억장치(스왑 영역)** 로 내보냈다가 필요 시 다시 적재
- 물리 메모리보다 큰 주소 공간을 가진 프로세스도 실행 가능

**용어 정리**
- 스왑 아웃: 메모리 → 보조기억장치
- 스왑 인: 보조기억장치 → 메모리
- 물리 주소: 실제 하드웨어 메모리 주소

### 메모리 할당 방식
- **최초 적합 (First Fit)**  
  - 처음 발견한 적재 가능한 공간에 즉시 할당
  - 빠르지만 단편화 발생 가능

- **최적 적합 (Best Fit)**  
  - 가장 작은 빈 공간에 할당
  - 탐색 비용 큼

- **최악 적합 (Worst Fit)**  
  - 가장 큰 빈 공간에 할당
  - 단편화가 오히려 커질 수 있음

### 외부 단편화
- 작은 빈 공간들이 흩어져 큰 프로세스를 할당할 수 없는 현상

**해결 방법**
- 메모리 압축 (Compaction)
  - 단점: 실행 중단, 오버헤드 큼

---

### 핵심 키워드 (4)
- 스와핑
- 최초 적합 / 최적 적합 / 최악 적합
- 외부 단편화
- 메모리 압축

---

## 14-2. 페이징을 통한 가상 메모리 관리

### 페이징이란
- 논리 주소 공간 → **페이지**
- 물리 주소 공간 → **프레임**
- 페이지를 프레임에 비연속적으로 배치

### 페이지 테이블
- 페이지 번호 → 프레임 번호 매핑
- 프로세스마다 개별 페이지 테이블 보유

### 주소 변환 구성
- 페이지 번호(Page Number)
- 변위(Offset)

### 페이지 테이블 엔트리(PTE)
- 유효 비트: 메모리 적재 여부
- 보호 비트: 읽기/쓰기 권한
- 참조 비트: 접근 여부
- 수정 비트(Dirty Bit): 변경 여부

### PTBR & TLB
- **PTBR**: 현재 프로세스의 페이지 테이블 위치
- **TLB**: 페이지 테이블 캐시
  - TLB 히트 → 메모리 접근 1회
  - TLB 미스 → 메모리 접근 2회

### 페이징의 이점
- 외부 단편화 제거
- 쓰기 시 복사(Copy-on-Write) 가능
- 계층적 페이징으로 페이지 테이블 크기 축소

---

### 핵심 키워드 (4)
- 페이징
- 페이지 테이블
- PTBR
- TLB

---

## 14-3. 페이지 교체와 프레임 할당

### 요구 페이징
- 필요한 페이지만 메모리에 적재
- 순수 요구 페이징은 초기 페이지 폴트 빈번

### 페이지 교체 알고리즘
- **FIFO**: 가장 오래된 페이지 교체
- **최적**: 앞으로 가장 덜 사용될 페이지 교체
- **LRU**: 가장 오래 사용되지 않은 페이지 교체

### 스래싱(Thrashing)
- 페이지 교체에 CPU 시간을 대부분 소모
- CPU 이용률 급감

### 프레임 할당
- **정적 할당**
  - 균등 할당
  - 비례 할당
- **동적 할당**
  - 작업 집합 모델
  - 페이지 폴트 빈도 기반

---

### 핵심 키워드 (4)
- 요구 페이징
- 페이지 교체 알고리즘
- 스래싱
- 프레임 할당 방식
